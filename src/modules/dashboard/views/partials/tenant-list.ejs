<% if (!tenants?.length) { %>
<tr>
  <td colspan="5" class="px-6 py-12 text-center text-gray-500 text-sm">
    No tenants found. Click "Add New Tenant" to get started.
  </td>
</tr>
<% } %>

<% tenants.forEach(tenant => { %>
<tr class="hover:bg-gray-50 transition group">
  <td class="px-6 py-4 whitespace-nowrap">
    <div class="text-sm font-medium text-gray-900"><%= tenant.name %></div>
  </td>
  <td class="px-6 py-4 whitespace-nowrap">
    <button class="text-blue-600 hover:text-blue-900 font-medium text-sm" hx-get="/tenants/<%= tenant.id %>/credentials" hx-target="#modal-container">
      View Credentials
    </button>
  </td>
  <td class="px-6 py-4 whitespace-nowrap">
    <% 
    let statusText = tenant.status || 'DISCONNECTED';
    let statusClass = '';
    
    if (statusText === 'CONNECTED') {
      statusClass = 'bg-green-100 text-green-800 cursor-default';
    } else {
      // Make button clickable if not connected
      statusClass = 'bg-yellow-100 text-yellow-800 cursor-pointer hover:bg-yellow-200';
    }
  %>

    <% if (statusText === 'CONNECTED') { %>
    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full <%= statusClass %>">
      <%= statusText %>
    </span>
    <% } else { %>
    <button class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full <%= statusClass %>" hx-get="/tenants/scan?tenantId=<%= tenant.id %>&apiKey=<%= tenant.apiKey %>" hx-target="#modal-container">
      <%= statusText === 'DISCONNECTED' ? 'SCAN QR' : statusText %>
    </button>
    <% } %>
  </td>
  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
    <%= tenant.jid ? '+' + tenant.jid.split('@')[0] : '-' %>
  </td>
  <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
    <button class="text-blue-600 hover:text-blue-900 mr-3" hx-get="/tenants/<%= tenant.id %>/logs" hx-target="#modal-container" title="View Message History">
      Logs
    </button>
    <button class="text-red-600 hover:text-red-900" hx-delete="/tenants/<%= tenant.id %>" hx-confirm="Delete this tenant?">
      Delete
    </button>
  </td>
</tr>
<% }) %>
